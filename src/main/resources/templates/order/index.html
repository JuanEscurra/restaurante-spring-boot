<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout/head :: head">
</head>
<body>

	<div class="container">
		
		<header th:replace="layout/header :: header"></header>
	
		<nav th:replace="layout/navbar :: nav"></nav>
		
		<main class="main">
			<div
				class="msg msg--error"
				th:if="${error != null}">
				<span th:text="${error}"></span>
				<div class="msg__close"><i class="fas fa-2x fa-times-circle"></i></div>
			</div>
			<div class="card">
				<h3 class="section-title">Lista de pedidos</h3>
				<div class="flex">
					<div>
						<label for="btn-modal" class="btn btn--add">
							Reservar mesa
						</label>
						<input type="checkbox" id="btn-modal" />
						<div class="modal">
							<div class="modal__header">
								<h4>Mesa a ocupar</h4>
								<label class="modal__shutdown" for="btn-modal">
									<i class="fas fa-times-circle fa-2x"></i>
								</label>
							</div>
							<div class="modal__body">
								<form
										th:action="@{/order/register}"
										method="post"
										th:object="${order}"
										class="form">
									<input
											type="hidden"
											th:field="*{idOrder}"
											class="form__input"/>
									<div class="form__field">
										<label for="tableNumber">NÂ° Mesa</label>
										<input
												type="number"
												th:field="*{tableNumber}"
												class="form__input"/>
									</div>
									<div class="btn__double">
										<label for="btn-modal" class="btn btn--cancel">Cancelar</label>
										<button type="submit" class="btn btn--add">Registrar</button>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
				<div class="content">
					<div>
						<h4>Ordenes activas</h4>
						<p th:if="${orders == null or orders.isEmpty()}">
							No hay ordenes activas en este momento
						</p>
						<table
								class="table"
								th:if="${orders != null and !orders.isEmpty()}">
							<thead class="table__head">
							<tr>
								<th>Fecha</th>
								<th>Mesa</th>
								<th>Acciones</th>
							</tr>
							</thead>
							<tbody class="table__body" id="tbody-orders">
							<tr th:each="order: ${orders}">
								<td th:text="${#dates.format(order.date, 'dd-MM-yyyy HH:mm')}"></td>
								<td th:text="${order.tableNumber}"></td>
								<td>
									<a th:href="@{/order/form/} + ${order.idOrder}" class="btn btn--update update-order">
										Editar
									</a>
									<a th:href="@{/order/delete/} + ${order.idOrder}" class="btn btn--delete delete-order">
										Eliminar
									</a>
								</td>
							</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</main>
		<footer th:replace="layout/footer :: footer"></footer>
	</div>
	
	<th:block th:insert="layout/scripts :: scripts"></th:block>
	<script th:src="@{/js/order/index.js}"></script>
</body>
</html>